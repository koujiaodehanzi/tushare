# 前端页面使用指南

## 启动服务

1. 确保已配置好 `config/config.yaml` 中的 Tushare token
2. 启动API服务：
```bash
cd /Users/wyk/selfspace/code/tushare
python3 main.py
```

3. 打开浏览器访问：
```
http://localhost:5001
```

## 页面功能

### 1. 基础数据同步
- **功能**：一键同步股票列表、股东持股、游资名录
- **操作**：点击"开始同步"按钮
- **结果**：显示各类数据同步的记录数

### 2. 单日数据同步
- **功能**：同步指定日期的所有交易数据
- **操作**：
  1. 输入交易日期（格式：YYYYMMDD，如 20251212）
  2. 点击"开始同步"按钮
- **结果**：显示同步的总记录数

### 3. 日期范围同步
- **功能**：批量同步多个交易日的数据
- **操作**：
  1. 输入开始日期（格式：YYYYMMDD）
  2. 输入结束日期（格式：YYYYMMDD）
  3. 点击"开始同步"按钮
- **结果**：显示同步的总记录数
- **注意**：系统会自动跳过已同步的日期（幂等性）

### 4. 股票列表同步
- **功能**：单独同步股票列表数据
- **操作**：点击"开始同步"按钮
- **结果**：显示同步的股票数量

### 5. 股东持股同步
- **功能**：单独同步股东持股数据
- **操作**：点击"开始同步"按钮
- **结果**：显示同步的持股记录数

### 6. 游资名录同步
- **功能**：单独同步游资席位信息
- **操作**：点击"开始同步"按钮
- **结果**：显示同步的游资记录数

## 系统状态

页面底部显示：
- **API地址**：当前连接的后端API地址
- **连接状态**：显示与后端的连接状态
  - ✓ 已连接：后端服务正常
  - ✗ 未连接：后端服务未启动或无法访问

## 结果状态说明

- **蓝色背景**：正在同步中...
- **绿色背景**：同步成功，显示详细数据
- **红色背景**：同步失败，显示错误信息

## 注意事项

1. **日期格式**：必须是8位数字，格式为YYYYMMDD
2. **交易日**：只能同步交易日的数据，非交易日会返回空数据
3. **API限流**：Tushare有API调用频率限制，大量同步时请注意
4. **幂等性**：重复同步相同日期不会产生重复数据
5. **同步时间**：
   - 基础数据同步：约1-2分钟
   - 单日数据同步：约30秒-1分钟
   - 日期范围同步：取决于日期数量，每日约30秒

## 常见问题

### 1. 页面显示"未连接"
- 检查后端服务是否启动
- 确认端口5001未被占用
- 检查防火墙设置

### 2. 同步失败
- 检查 Tushare token 是否配置正确
- 确认网络连接正常
- 查看后端日志获取详细错误信息

### 3. 同步速度慢
- 正常现象，受Tushare API限流影响
- 系统已实现自动限流和重试机制
- 建议分批同步，避免一次性同步过多数据

## 技术特性

- **响应式设计**：支持桌面和移动设备
- **实时反馈**：同步过程实时显示状态
- **错误处理**：友好的错误提示
- **自动检测**：页面加载时自动检测后端连接
- **默认日期**：单日同步默认填充昨天的日期
